<!DOCTYPE html>
<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1">
       <title>TOTALLY</title>
       <link rel="stylesheet" href="style.css";>
    </head>

    <body>
        <header>
            <h1>TOTALLY</h1>
                <div class="line-up">
                    <div class="left">
                        <ul>
                            <li><a href="#ALL">ALL</a></li>
                            <li><a href="#NEW">new</a></li>
                            <li><a href="#VINTAGE">VINTAGE</a></li>
                            <li><a href="#CATEGORY">CATEGORY</a></li>
                            <li><a href="#LOOKBOOK">LOOKBOOK</a></li>
                            <li><a href="#BLOG">BLOG</a></li>
                        </ul>
                    </div>
                    
                    <div class="right">
                        <ul>
                            <li><a href="#LOGIN">LOGIN</a></li>
                            <li><a href="#CONTACT">CONTACT</a></li>
                        </ul>
                    </div>
                </div>
        </header>

        <hr class="line-style-1">

        <div class="main">
            <div class="image">
                <img src="image_720.png" alt="main-visual-image" style="width:100%;">
            </div>
            <div class="text">
                <hr class="line-style-2">
                <h2 id="product-name" >TOTALLY Short Sleeve Shirt</h2>
                <hr class="line-style-3">
                <p class="p-1">テキストテキストテキストテキストテキストテキストテキスト<br>
                    テキストテキストテキストテキストテキストテキストテキスト<br>
                    テキストテキストテキストテキストテキストテキストテキスト<br>
                    テキストテキストテキストテキストテキストテキストテキスト<br>
                    テキストテキストテキストテキストテキストテキストテキスト<br>
                    テキストテキスト
                </p>
                <p class="p-2">
                    ￥9,999+tax
                </p>
                <table class="order-table">
                    <thead>
                        <tr>
                            <th class="color">Color</th>
                            <th class="size">Size</th>
                            <th class="quantity"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>White</td>
                            <td>S</td>
                            <td>
                                <select name="quantity-s">
                                    <option value="" selected disabled hidden></option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>White</td>
                            <td class="vacant">M</td>
                            <td>
                                <select name="quantity-M">
                                    <option value="" selected disabled hidden></option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>White</td>
                            <td class="vacant">L</td>
                            <td>
                                <select name="quantity-L">
                                    <option value="" selected disabled hidden></option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="margin">
                    <a href="#" class="button">ADD TO CART</a>
                </div>
                <div class="order-table2">
                    <table class="table2">
                        <thead>
                            <tr>
                                <th>Size</th>
                                <th>Chest</th>
                                <th>Weist</th>
                                <th>Height</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>S</td>
                                <td>99～99</td>
                                <td>99～99</td>
                                <td>99～99</td>
                            </tr>
                            <tr>
                                <td>M</td>
                                <td>99～99</td>
                                <td>99～99</td>
                                <td>99～99</td>
                            </tr>
                            <tr>
                                <td>L</td>
                                <td>99～99</td>
                                <td>99～99</td>
                                <td>99～99</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
            </div>
        </div>
        <p class="p-last">©TOTALLY</p>

        <script>
                        const url =
                "http://localhost:3333/item/0";

            // 送信するデータオブジェクト
           
            // fetchを使ってPOSTリクエストを送信
            fetch(url, {
                method: "POST",
                headers: {
                "Content-Type": "application/json", // JSONデータを送信することを示す
                },
            })
                .then((response) => {
                if (!response.ok) {
                    throw new Error(`HTTPエラー: ${response.status}`);
                }
                return response.json(); // JSON形式のレスポンスをオブジェクトに変換
                })
                .then((data) => {
                // 取得したデータを保持
                const responseData = data;
                console.log("サーバーからの応答:", responseData);
                // ここでresponseDataを使用して操作や表示が可能
                document.getElementById('product-name').textContent = responseData.name;  
                document.getElementsByClassName('p-1')[0].textContent = responseData.description;

                var price_str=String(responseData.price);
                let formatprice="";
                for (let char=0;char<price_str.length;char++) {
                if (char % 3 === 0 && char !== 0) {
                    formated_price = "," + formated_price;
                }
                formated_price = price_str[price_str.length - char - 1] + formated_price;
                }
                document.getElementsByClassName('p-2')[0].textContent = '¥' + formated_price + '+tax';  
                })
                .catch((error) => {
                console.error("エラーが発生しました:", error);
                });
        </script>
    </body>
</html>